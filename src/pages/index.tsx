import FriendsActivity from "../components/FriendsActivity";
import NewReleases from "../components/NewReleases";
import RecentlyPlayed from "../components/RecentlyPlayed";
import ListPage from "../components/ListPage";
import Head from "next/head";
import getNewSongs from "../utils/getNewSongs";
import { MusicList } from "types";
import getNewAlbums from "@/utils/getNewAlbums";
import Carousel from "@/components/carousel/Carousel";
import FeaturedAlbums from "@/components/featuredAlbums/FeaturedAlbums";
import TopMusicAlbums from "@/components/topMusicAlbums/TopMusicAlbums";

type HomeProps = {
  // newSongsList: MusicList;
  newAlbums: MusicList[];
};

export default function Home({ newAlbums }: HomeProps) {
  return (
    <>
      <Head>
        <title>Taotify</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Carousel />
      <FeaturedAlbums albums={newAlbums} />
      <TopMusicAlbums />
    </>
  );
}

export /* istanbul ignore next */ async function getStaticProps() {
  // const newSongsRes = await getNewSongs();
  // const newSongsList = {
  //   id: 0,
  //   type: "newSongs",
  //   songs: newSongsRes.status ? newSongsRes.songs : [],
  // };

  const newAlbums = await getNewAlbums("EA", 7);

  return {
    props: { newAlbums },
    revalidate: 600,
  };
}
